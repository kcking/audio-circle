<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <script>
      navigator.getUserMedia  = navigator.getUserMedia ||
                                navigator.webkitGetUserMedia ||
                                navigator.mozGetUserMedia ||
                                navigator.msGetUserMedia;
      window.AudioContext     = window.AudioContext ||
                                window.webkitAudioContext;
      if (navigator.getUserMedia && window.AudioContext) {
        var ajaxRequest = new XMLHttpRequest();
        ajaxRequest.open('GET', 'us.ogg', true);
        ajaxRequest.responseType = 'arraybuffer';
        ajaxRequest.onload = function() {
          navigator.getUserMedia({ audio: true }, function(stream) {
            var context = new AudioContext();
            context.decodeAudioData(ajaxRequest.response, function(buffer) {
              var processor = context.createScriptProcessor(1024, 1, 1);
              processor.onaudioprocess = function(e) {
                var inputData = e.inputBuffer.getChannelData(0);
                var outputData = e.outputBuffer.getChannelData(0);
                for (var i = 0; i < inputData.length; i++) {
                  outputData[i] = inputData[i];
                }
              }
              processor.connect(context.destination);

              var microphone = context.createMediaStreamSource(stream);
              microphone.connect(processor);
            }, function(e) {
              alert('Error decoding audio: ' + String(e));
            });
          }, function(e) {
            alert('Error calling getUserMedia: ' + String(e));
          });
        };
        ajaxRequest.onerror = function(e) {
          alert('Error loading unit sample response: ' + String(e));
        }
        ajaxRequest.send();
      };
    </script>
  </head>
  <body>
    Hello, world!
  </body>
</html>